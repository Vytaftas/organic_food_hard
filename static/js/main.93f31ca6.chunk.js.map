{"version":3,"sources":["useSearch.js","item.js","popup.js","nav.js","App.js","index.js"],"names":["useSearch","query","pageNum","useState","loading","setLoading","error","setError","items","setItems","hasMore","setHasMore","useEffect","cancel","axios","method","url","params","q","limit","offset","cancelToken","CancelToken","c","then","res","prevItems","Set","data","pagination","total_count","catch","e","isCancel","Item","title","img","orgImg","className","onClick","console","log","pop","document","querySelector","popImg","addEventListener","classList","remove","setTimeout","src","alt","add","Popup","Nav","stuff","updateSearch","getSearchQuery","search","onChange","value","type","placeholder","App","setQuery","setPageNum","setSearch","observer","useRef","lastItemElementRef","useCallback","node","current","disconnect","IntersectionObserver","entries","isIntersecting","prevPageNum","observe","regexp","RegExp","target","preventDefault","test","map","item","index","trim","undefined","length","ref","images","downsized","id","original","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.93f31ca6.chunk.js","sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst useSearch = (query, pageNum) => {\r\n  const apiKey = \"U0EopUaNWby8hVDebUgVbo0NYqO6YBFF\";\r\n  const searchUrl = \"api.giphy.com/v1/gifs/search\";\r\n  const limit = 12;\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(false);\r\n  const [items, setItems] = useState([]);\r\n  const [hasMore, setHasMore] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setItems([]);\r\n  }, [query]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    setError(false);\r\n\r\n    let cancel;\r\n    axios({\r\n      method: \"GET\",\r\n      url: `https://${searchUrl}?api_key=${apiKey}`,\r\n      params: {\r\n        q: query,\r\n        limit: limit,\r\n        offset: pageNum,\r\n      },\r\n      cancelToken: new axios.CancelToken((c) => (cancel = c)),\r\n    })\r\n      .then((res) => {\r\n        setItems((prevItems) => {\r\n          return [...new Set([...prevItems, ...res.data.data])];\r\n        });\r\n        setHasMore(res.data.pagination.total_count - pageNum > 0);\r\n        setLoading(false);\r\n      })\r\n      .catch((e) => {\r\n        if (axios.isCancel(e)) return;\r\n        setError(true);\r\n      });\r\n    return () => cancel();\r\n  }, [query, pageNum]);\r\n\r\n  return { loading, error, items, hasMore };\r\n};\r\n\r\nexport default useSearch;\r\n","import React from \"react\";\r\n\r\nconst Item = ({ title, img, orgImg }) => {\r\n  const createPopUp = () => {\r\n    console.log(title, img, orgImg);\r\n    const pop = document.querySelector(\".popup-container\");\r\n    const popImg = document.querySelector(\".popup-container-img-src\");\r\n    const popClose = document.querySelector(\".popup-container-close\");\r\n\r\n    popClose.addEventListener(\"click\", function () {\r\n      pop.classList.remove(\"visible\");\r\n      setTimeout(() => {\r\n        pop.classList.remove(\"display\");\r\n      }, 500);\r\n    });\r\n\r\n    popImg.src = orgImg;\r\n    popImg.alt = title;\r\n\r\n    pop.classList.add(\"display\");\r\n    setTimeout(() => {\r\n      pop.classList.add(\"visible\");\r\n    }, 100);\r\n  };\r\n\r\n  return (\r\n    <div className=\"item\" onClick={createPopUp}>\r\n      <p className=\"item-text\">{title}</p>\r\n      <img className=\"item-img\" src={img} alt={title} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Item;\r\n","import React from \"react\";\r\n\r\nconst Popup = () => {\r\n  return (\r\n    <div className=\"popup-container\">\r\n      <div className=\"popup-container-img\">\r\n        <div className=\"popup-container-close\">\r\n          <i className=\"far fa-times-circle\"></i>\r\n        </div>\r\n        <img className=\"popup-container-img-src\" src=\"\" alt=\"\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Popup;\r\n","import React from \"react\";\r\n\r\nconst Nav = ({ stuff }) => {\r\n  const [updateSearch, getSearchQuery, search] = [...stuff];\r\n  return (\r\n    <div className=\"nav\">\r\n      <div className=\"search\">\r\n        <form className=\"search-form\">\r\n          <input\r\n            className=\"search-bar\"\r\n            onChange={updateSearch}\r\n            value={search}\r\n            type=\"text\"\r\n            placeholder=\"Search..\"\r\n          />\r\n          <button className=\"search-btn\" onClick={getSearchQuery}>\r\n            Search\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Nav;\r\n","// getGiphy();\n\n//trending searches\n\n//trending\n//api.giphy.com/v1/gifs/trending\n//api.giphy.com/v1/stickers/trending\n\n//search\n//api.giphy.com/v1/gifs/search\n//api.giphy.com/v1/stickers/search\n\nimport React, { useRef, useState, useCallback } from \"react\";\nimport useSearch from \"./useSearch\";\nimport Item from \"./item\";\nimport Popup from \"./popup\";\nimport Nav from \"./nav\";\nimport \"./style.css\";\n\nconst App = () => {\n  const [query, setQuery] = useState(\"ibm\");\n  const [pageNum, setPageNum] = useState(0);\n  const [search, setSearch] = useState(\"\");\n\n  const { items, hasMore, loading, error } = useSearch(query, pageNum);\n\n  const observer = useRef();\n\n  const lastItemElementRef = useCallback(\n    (node) => {\n      if (loading) return;\n      if (observer.current) observer.current.disconnect();\n\n      observer.current = new IntersectionObserver((entries) => {\n        if (entries[0].isIntersecting && hasMore) {\n          setPageNum((prevPageNum) => prevPageNum + 12);\n        }\n      });\n      if (node) observer.current.observe(node);\n    },\n    [loading, hasMore]\n  );\n\n  const updateSearch = (e) => {\n    setSearch(e.target.value);\n  };\n\n  var regexp = new RegExp(/^[a-zA-Z0-9 ]+$/);\n\n  const getSearchQuery = (e) => {\n    e.preventDefault();\n    if (regexp.test(search)) {\n      setPageNum(1);\n      setQuery(search);\n      setSearch(\"\");\n    } else {\n      console.log(\"Wrong input\");\n      return;\n    }\n  };\n\n  //COMMENT\n  return (\n    <div className=\"app\">\n      <Nav stuff={[updateSearch, getSearchQuery, search]} />\n\n      <div className=\"item-container\">\n        <Popup />\n        {items.map((item, index) => {\n          if (\n            item.title.trim() === \"\" ||\n            item.title === undefined ||\n            item.title === null\n          ) {\n            item.title = `${query}`;\n          }\n          if (items.length === index + 1) {\n            return (\n              <div ref={lastItemElementRef} key={item.id} className=\"item\">\n                <p className=\"item-text\">{item.title}</p>\n                <img\n                  className=\"item-img\"\n                  src={item.images.downsized.url}\n                  alt={item.title}\n                />\n              </div>\n            );\n          } else {\n            return (\n              <Item\n                title={item.title}\n                img={item.images.downsized.url}\n                orgImg={item.images.original.url}\n                key={item.id}\n              />\n            );\n          }\n        })}\n\n        {loading && (\n          <Item\n            title=\"Loading\"\n            img={\n              \"https://upload.wikimedia.org/wikipedia/commons/b/b9/Youtube_loading_symbol_1_(wobbly).gif\"\n            }\n            key={\"item.id\"}\n          />\n        )}\n\n        {error && (\n          <div className=\"item\">\n            <p>Error!</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}